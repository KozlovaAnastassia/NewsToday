# Документация API Новостей

## Обзор

API Новостей предоставляет доступ к актуальным новостным статьям из различных источников по всему миру. API работает по принципу REST и возвращает данные в формате JSON.

  
## NetworkManager - центральный компонент для выполнения сетевых запросов к API Новостей.

  Этот менеджер предоставляет интерфейс для отправки запросов и получения данных, используя моделирование запросов через эндпоинты и обработку ответов сервера.
  
  ### Основные возможности:
  - Выполнение поисковых запросов через метод fetchData.
  - Получение топ новостей по категориям через метод fetchTopHeadlines.
  - Обработка ошибок сетевого взаимодействия и ошибок API.
  
  ### Извлекаемые параметры из структуры статей:
  - author: Автор статьи.
  - title: Заголовок статьи.
  - description: Краткое описание статьи.
  - url: Ссылка на полный текст статьи.
  - urlToImage: Ссылка на изображение статьи.
  - publishedAt: Дата и время публикации.
  - content: Полный текст статьи (может быть обрезан
  
  ### Как использовать:
  1. Используйте NetworkManager.shared для доступа к единственному экземпляру менеджера.
  2. Выберите нужный метод в зависимости от задачи (fetchData или fetchTopHeadlines).
  3. Передайте необходимые параметры запроса и обработчик результата.
  4. В обработчике результата выполните необходимую логику с полученными данными.
  
  ### Пример использования:
  
  - Пример вызова для получения топ новостей по категории "технологии"

  NetworkManager.shared.fetchTopHeadlines(category: "technology") { result in

      DispatchQueue.main.async {
          switch result {
          case .success(let searchResults):
             - Тут мы имеем список статей в searchResults.articles
             - Допустим, мы хотим вывести информацию первой статьи
            
            if let firstArticle = searchResults.articles.first {
                let author = firstArticle.author ?? "Автор неизвестен"
                let content = firstArticle.content ?? "Контент не доступен"
                - Тут вы можете использовать author и content для отображения в ячейке
                print("Автор: \(author), Контент: \(content)")
          case .failure(let error):
              print("Ошибка при выполнении запроса: \(error)")
          }
      }
  }
        
 ###  Важно:
  - Для использования NetworkManager необходим API ключ, который должен быть задан в структуре API.
  - Обработка результатов запроса выполняется асинхронно.
  - Все сетевые запросы выполняются в параллельной очереди, а результаты возвращаются в основной очереди.


# Дополнительная информация по работе с API 

##Базовый URL

https://newsapi.org

##Аутентификация

Для всех запросов необходимо включить ваш API ключ в заголовок X-API-KEY.
X-API-KEY: ваш_ключ_api

##Эндпоинты

###1. Поиск новостей (/v2/everything)

Позволяет выполнять поиск новостей по различным критериям.

Параметры запроса:

 - q: Ключевые слова для поиска.
 - language: Язык новостей (например, en).
 - pageSize: Количество новостей на странице.
 
###2. Топ новости (/v2/top-headlines)

Возвращает список топ новостей по заданной категории.

Параметры запроса:

 - category: Категория новостей (например, technology).
 
 
##Формат ответа

###Успешный ответ:

```json
{
  "status": "ok",
  "totalResults": 100,
  "articles": [
    {
      "source": {"id": "techcrunch", "name": "TechCrunch"},
      "author": "John Doe",
      "title": "Новая технология Apple",
      "description": "Краткое описание статьи...",
      "url": "https://example.com/article",
      "urlToImage": "https://example.com/image.jpg",
      "publishedAt": "2021-03-10T10:00:00Z",
      "content": "Полный текст статьи..."
    }
  ]
}
```

###Ответ с ошибкой:

{
  "status": "error",
  "code": "apiKeyMissing",
  "message": "Your API key is missing. Append this to the URL with the apiKey param, or use the x-api-key HTTP header."
}

Коды ошибок

400 - Bad Request. Неверный запрос, часто из-за отсутствия или неправильной конфигурации параметра.
401 - Unauthorized. Отсутствует или неверен API ключ.
429 - Too Many Requests. Превышен лимит запросов.
500 - Server Error. Внутренняя ошибка сервера.
